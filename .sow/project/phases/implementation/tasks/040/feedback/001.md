# Review - Iteration 1

## Summary

Reviewed the worktree operations implementation:

**Files created:**
- `libs/git/worktree.go` - WorktreePath, EnsureWorktree, CheckUncommittedChanges
- `libs/git/worktree_test.go` - 11 test cases using real git repos

**Functions implemented:**
- `WorktreePath(repoRoot, branch string) string` - Path calculation
- `EnsureWorktree(g *Git, repoRoot, path, branch string) error` - Worktree creation
- `CheckUncommittedChanges(g *Git) error` - Uncommitted changes check

**Minor fix applied during review:**
- Fixed godot lint (comment ending format)

## Assessment

**PASS**

## Feedback

All acceptance criteria met:

1. ✅ WorktreePath generates correct paths: Simple and slashed branches work
2. ✅ EnsureWorktree is idempotent: Returns nil if worktree exists
3. ✅ EnsureWorktree creates worktree: Successfully creates at path
4. ✅ EnsureWorktree creates branch: Creates branch if doesn't exist
5. ✅ EnsureWorktree handles same-branch case: Switches away first
6. ✅ CheckUncommittedChanges detects changes: Returns error for modified files
7. ✅ CheckUncommittedChanges allows untracked: No error for untracked-only
8. ✅ CheckUncommittedChanges respects env var: Skips when SOW_SKIP_UNCOMMITTED_CHECK=1
9. ✅ All tests pass: 11 worktree tests pass

Key implementation correctly follows design decisions:
- Uses os/exec for git CLI commands (not libs/exec)
- Uses real filesystem paths (not core.FS)
- Tests use t.TempDir() with real git repos
- API decoupled from sow.Context

## Next Steps

Task complete. Moving to task 050 (mocks and README).
