// Code generated by "cue exp gengotypes"; DO NOT EDIT.

package phases

import (
	"time"
)

// GenericStatus defines the common phase status values that most project types use.
// Project types can use this for their phases or define custom status enums per phase.
type GenericStatus string

// Phase is the universal schema for all phases in all project types.
// What makes a phase unique is its guards, prompts, and which operations it supports.
// NOTE: Project types will typically define their own phase types with additional fields.
type Phase struct {
	// Common metadata
	Status string `json:"status"`

	Enabled bool `json:"enabled"`

	// Timestamps
	Created_at time.Time `json:"created_at"`

	Started_at *time.Time `json:"started_at,omitempty"`

	Completed_at *time.Time `json:"completed_at,omitempty"`

	Failed_at *time.Time `json:"failed_at,omitempty"`

	// Iteration tracking for phases that go through multiple cycles
	// Starts at 1, increments on re-entry after failure
	Iteration *int `json:"iteration,omitempty"`

	// Generic collections (used by phases that need them)
	Artifacts []Artifact `json:"artifacts"`

	Tasks []Task `json:"tasks"`

	// Input sources that inform this phase's work (design, breakdown)
	Inputs []Artifact `json:"inputs,omitempty"`

	// Escape hatch for unanticipated fields
	Metadata map[string]any/* CUE top */ `json:"metadata,omitempty"`
}

// Artifact represents a phase artifact requiring human approval
type Artifact struct {
	// Path relative to .sow/project/
	Path string `json:"path"`

	// Human approval status (optional for exploration artifacts)
	Approved *bool `json:"approved,omitempty"`

	// When artifact was created
	Created_at time.Time `json:"created_at"`

	// Artifact type (e.g., "task_list", "review", "documentation")
	Type *string `json:"type,omitempty"`

	// Review assessment result ("pass" or "fail")
	Assessment *string `json:"assessment,omitempty"`

	// Escape hatch for unanticipated fields
	Metadata map[string]any/* CUE top */ `json:"metadata,omitempty"`
}

// Task represents an implementation task
type Task struct {
	// Gap-numbered ID (010, 020, 030...)
	Id string `json:"id"`

	// Task name
	Name string `json:"name"`

	// Task status
	Status string `json:"status"`

	// Can run in parallel with other tasks
	Parallel bool `json:"parallel"`

	// Task IDs this task depends on
	Dependencies []string `json:"dependencies,omitempty"`

	// References to artifacts created for this task (exploration topics)
	Refs []Artifact `json:"refs,omitempty"`

	// Task-specific metadata (e.g., github_issue_url for breakdown tasks)
	Metadata map[string]any/* CUE top */ `json:"metadata,omitempty"`
}
