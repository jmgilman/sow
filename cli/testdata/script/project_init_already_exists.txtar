# Test project initialization when project already exists
# Should fail with project exists error

exec git init
exec git config user.email 'test@example.com'
exec git config user.name 'Test User'
exec git commit --allow-empty -m 'Initial commit'
exec git checkout -b feat/test-feature
exec sow init

# Create first project
exec sow project init my-feature --description 'First project'
stderr 'âœ“ Initialized project'

# Try to initialize another project (should fail)
! exec sow project init another-feature --description 'Second project'
stderr 'project ''my-feature'' already exists on branch ''feat/test-feature'''

# Verify original project still exists
exists .sow/project/state.yaml
exec cat .sow/project/state.yaml
stdout 'name: my-feature'
