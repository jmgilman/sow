# Test project status command
# Should display project information in text and JSON formats

exec git init
exec git config user.email 'test@example.com'
exec git config user.name 'Test User'
exec git commit --allow-empty -m 'Initial commit'
exec git checkout -b feat/test-feature
exec sow init
exec sow project init my-feature --description 'Add new feature'

# Test text output
exec sow project status
stderr 'Project: my-feature .on feat/test-feature.'
stderr 'Description: Add new feature'
stderr 'Phases:'
stderr 'Discovery.*skipped'
stderr 'Design.*skipped'
stderr 'Implementation.*pending'
stderr 'Review.*pending'
stderr 'Finalize.*pending'
stderr 'Tasks: none yet'

# Test JSON output
exec sow project status --format json
stderr '"name": "my-feature"'
stderr '"branch": "feat/test-feature"'
stderr '"description": "Add new feature"'
stderr '"discovery"'
stderr '"design"'
stderr '"implementation"'
stderr '"review"'
stderr '"finalize"'

# Test invalid format
! exec sow project status --format invalid
stderr 'invalid format ''invalid'''
