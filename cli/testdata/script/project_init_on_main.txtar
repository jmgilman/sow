# Test project initialization on main branch
# Should fail with protected branch error

exec git init
exec git config user.email 'test@example.com'
exec git config user.name 'Test User'
exec git commit --allow-empty -m 'Initial commit'
exec sow init

# Try to initialize project on default branch (should fail)
# Could be 'main' or 'master' depending on git version
! exec sow project init my-feature --description 'Test'
stderr 'cannot create project on protected branch'

# Verify no project was created
! exists .sow/project
